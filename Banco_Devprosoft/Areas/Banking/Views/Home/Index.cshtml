@model ApplicationUser 
@{
    ViewData["Title"] = "Index";
}



<div class="">

    <div class="jumbotron jumbotron-fluid border-success border-0 p-0">

        <div class="row">

            <div class="col-4">
                <img  class="img avatar-img rounded-circle ml-5" width="180" src="data:image/png;base64,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" />
            </div>
            <div class="col-8 mt-4 p-0">
                <div class="row">
                    <div class="col-6 mb-3">
                        <label><i class="fas fa-user"></i> Nombres:</label>
                        <span>@Model.Nombres</span>
                    </div>
                    <div class="col-6 mb-3">
                        <label><i class="fas fa-user"></i> Apellidos:</label>
                        <span>@Model.Apellidos</span>
                    </div>
                    <div class="col-6 mb-3">
                        <label><i class="fas fa-phone-alt"></i> Teléfono:</label>
                        <span>@Model.Telefono</span>
                    </div>
                    <div class="col-6 mb-3">
                        <label><i class="fas fa-envelope"></i> Correo:</label>
                        <span>@Model.Email</span>
                    </div>
                    <div class="col-6 mb-3">
                        <label><i class="fas fa-id-card"></i> Cédula:</label>
                        <span>@Model.Cedula</span>
                    </div>
                    <div class="col-6 mb-3">
                        <label><i class="fas fa-globe-americas"></i> Dirección:</label>
                        <span>@Model.Direccion</span>
                    </div>
                </div>
            </div>
        </div>

    </div>


    <div class="card card-success mb-3">

        <div class="card-header">

            <h4 class="text-light text-center ml-2 col-lg" id="Titulo_Cuenta"></h4>


        </div>
        <div class="card-body">

            <div class="row">
                <div class="col-6">
                    <h2>Balance actual:</h2>


                </div>

                <div class="col-6">
                    <h2 class="text-right" id="Balance_Cuenta"></h2>

                </div>



            </div>



        </div>



    </div>


    <div class="card card-success card-outline">

        <div class="card-header">

            <h4 class="text-light text-center ml-2 col-lg">Historial de Movimientos</h4>


        </div>
        <div class="card-body">
            <table id="Tabla_Movimientos" class="table table-responsive-lg table-hover w-100">
                <thead>
                    <tr>
                        <th>Transf #</th>
                        <th>Fecha y Hora</th>
                        <th>Cta. Origen</th>
                        <th>Cta. Destino</th>
                        <th>Monto</th>
                    </tr>
                </thead>
                <tbody>
                    @*<tr>
                        <td>2041</td>
                        <td>28/03/2021 - 3:10 AM</td>
                        <td>0801235</td>
                        <td>0752081</td>
                        <td>RD$2,500.00</td>
                    </tr>
                    <tr>
                        <td>2042</td>
                        <td>28/03/2021 - 3:12 AM</td>
                        <td>0801235</td>
                        <td>0752081</td>
                        <td>RD$20,000.00</td>
                    </tr>*@


                </tbody>
            </table>
        </div>



    </div>

</div>

@section Scripts{ 

    <script>

        $(document).ready(function () {

            $("#Tabla_Movimientos").DataTable();
            $(".paginate_button.active > a").addClass("bg-success");
            $(".paginate_button.active > a").addClass("text-light");
            $(".paginate_button.active").removeClass("active");

            $("li").removeClass("active");
            $("#li_Inicio").addClass("active");
            Obtener_Info_Cuentas();
            Obtener_Mis_Transferencias();
        });


      

        const formatter = new Intl.NumberFormat('en-US', {
            style: 'currency',
            currency: 'USD',
            minimumFractionDigits: 0
        })


        console.log(formatter.format(result.cuenta.balance)) // "$10,000

        function Obtener_Info_Cuentas() {

            $.get("/Banking/Cuentas/Obtener_Info_Cuentas").done(function (result) {
                console.log(result)
                var titulo = `Cuenta #${result.cuenta.cuenta_ID}`;
                var balance = `RD${formatter.format(result.cuenta.balance)}`;

                $("#Titulo_Cuenta").text(titulo);
                $("#Balance_Cuenta").text(balance);

            });
        }

        function Obtener_Mis_Transferencias() {

            $.get("/Banking/Transferencias/Obtener_Mis_Transferencias").done(function (result) {
                $("#Tabla_Movimientos").dataTable({
                    language: {
                        "lengthMenu": "Mostrar _MENU_ Registros",
                        "zeroRecords": "No se encontraron resultados",
                        "info": "_TOTAL_ transacciones en total.",
                        "infoEmpty": "Mostrando registros del 0 al 0 de un total de 0 registros",
                        "infoFiltered": "(filtrado de un total de _MAX_ registros)",
                        "sSearch": "<i class='fas fa-search'></i> Buscar:",
                        "oPaginate": {
                            "sFirst": "Primero",
                            "sLast": "Último",
                            "sNext": "Siguiente",
                            "sPrevious": "Anterior"
                        },
                        "sProcessing": "Procesando...",
                    },
                    "destroy": "true",
                    "bLengthChange": false,
                    "bInfo": true,
                    "searching": true,
                    data: result.transferencias_List,
                    columns: [
                        {
                            "data": "transferencia_ID"
                        },
                        {
                            "data": "fecha_Transaccion", render: function (fecha) {
                                return moment(fecha).format('lll');
                            }
                        },
                        {
                            "data": "cuenta_Origen_ID"
                        },
                        {
                            "data": "cuenta_Destino_ID"
                        },
                        {
                            "data": "monto", render: function (monto) {
                                return `RD${formatter.format(monto)}`
                            }
                        },
                    ],
                    responsive: "true"
                });


            });

        }
       
    </script>

}
